<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>

		<!-- Тендерт оролцогчдын үнийн санал -->
		<record id="tender_participants_action" model="ir.actions.act_window">
			<field name="context">{'search_default_tender_id': [active_id],'default_tender_id': active_id}</field>
			<field name="domain">[('tender_id','=', active_id),('state','!=', 'draft')]</field>
			<field name="name">Tender Participants</field>
			<field name="res_model">tender.participants.bid</field>
			<field name="view_mode">tree,form</field>
			<field name="view_id" ref="view_tender_participants_bid_tree"/>
			<field name="help" type="html">
				<p class="oe_view_nocontent_create">
                    Here, you can create new participants of tender
				</p>
			</field>
		</record>

		<!-- Тендерт холбогдох гэрээ -->
		<record id="contract_action" model="ir.actions.act_window">
			<field name="name">Contract</field>
			<field name="context">{}</field>
			<field name="domain">[('tender_id','=',active_id)]</field>
			<field name="res_model">contract.management</field>
		</record>

		<!-- Tender search view -->
		<record id="view_tender_group" model="ir.ui.view">
			<field name="name">tender.select</field>
			<field name="model">tender.tender</field>
			<field name="arch" type="xml">
				<search string="Search Call for Tenders">
					<field name="name" filter_domain="['|', ('name','ilike',self), ('desc_name','ilike',self)]" string="Tender name"/>
					<field name="desc_name"/>
					<field name="company_id"/>
					<field name="sector_id"/>
					<field name="department_id"/>
					<field name="user_id"/>
					<field name="type_id"/>
					<field name="create_date"/>
					<field name="ordering_date"/>
					<field name="date_open_deadline"/>
					<field name="published_date"/>
					<field name="date_end"/>
					<field name="closed_date"/>
					<field name="is_open_tender"/>
					<field name="warranty"/>
					<field name="invitation_id"/>
					<field name="respondent_department_id"/>
					<field name="state"/>
					<group expand="0" string="Group By">
						<filter domain="[('state','in',['confirmed','send_to_manager','contract_created','delay','published','bid_expire','closed','in_selection','finished','cancelled'])]" icon="terp-stock_effects-object-colorize" name="group_tender" string="Tender"/>
						<filter string="Tender name" context="{'group_by':'name'}" name="tender_id"/>
						<filter string="Tender type" context="{'group_by':'type_id'}" name="type_id"/>
						<filter string="Дэд ангилал" context="{'group_by':'child_type_id'}" name="child_type_id"/>
						<filter string="Sector" context="{'group_by':'sector_id'}" name="sector"/>
						<filter string="Status" context="{'group_by':'state'}" name="state"/>
					</group>
				</search>
			</field>
		</record>

		<!-- Tender request search view -->
		<record id="view_tender_request_filter" model="ir.ui.view">
			<field name="name">tender.request.select</field>
			<field name="model">tender.tender</field>
			<field name="arch" type="xml">
				<search string="Search Call for Tenders">
					<field name="name" filter_domain="['|', ('name','ilike',self), ('desc_name','ilike',self)]" string="Tender name"/>
					<field name="desc_name"/>
					<field name="company_id"/>
					<field name="sector_id"/>
					<field name="department_id"/>
					<field name="user_id"/>
					<field name="type_id"/>
					<field name="create_date"/>
					<field name="ordering_date"/>
					<field name="date_open_deadline"/>
					<field name="published_date"/>
					<field name="date_end"/>
					<field name="closed_date"/>
					<field name="is_open_tender"/>
					<field name="warranty"/>
					<field name="invitation_id"/>
					<field name="respondent_department_id"/>
					<field name="state"/>
					<group expand="0" string="Group By">
						<filter domain="[('state','in', ['draft','disabled','contract_request','reject','allowed','open_purchase','bids','open','confirmed'])]" icon="terp-stock_effects-object-colorize" name="group_tender_request" string="Tender Request"/>
						<filter string="Tender name" context="{'group_by':'name'}" name="tender_id"/>
						<filter string="Tender type" context="{'group_by':'type_id'}" name="type_id"/>
						<filter string="Дэд ангилал" context="{'group_by':'child_type_id'}" name="child_type_id"/>
						<filter string="Sector" context="{'group_by':'sector_id'}" name="sector"/>
						<filter string="Status" context="{'group_by':'state'}" name="state"/>
					</group>
				</search>
			</field>
		</record>

		<!-- Tender type view tree -->
		<record id="view_tender_type" model="ir.ui.view">
			<field name="name">tender.type.tree</field>
			<field name="model">tender.type</field>
			<field name="arch" type="xml">
				<tree string="Tender">
					<field name="name"/>
					<field name="parent_id"/>
				</tree>
			</field>
		</record>

		<!-- Tender view tree -->
		<record id="view_tender" model="ir.ui.view">
			<field name="name">tender.tender.tree</field>
			<field name="model">tender.tender</field>
			<field name="arch" type="xml">
				<!-- colors="red:date_open_deadline &lt; current_date" -->
				<tree string="Tender">
					<field name="name"/>
					<field name="desc_name"/>
					<field name="type_id"/>
					<field name="create_date"/>
					<field name="sector_id"/>
					<field name="respondent_department_id"/>
					<field name="date_open_deadline"/>
					<field name="date_end"/>
					<field name="state"/>
				</tree>
			</field>
		</record>

		<!-- Tender invitation view tree -->
		<record id="view_tender_invitation" model="ir.ui.view">
			<field name="name">tender.invitation.guide.tree</field>
			<field name="model">tender.invitation.guide</field>
			<field name="arch" type="xml">
				<tree string="Tender Invitation tree" create="false">
					<field name="name"/>
					<field name="tender_id"/>
					<field name="state"/>
				</tree>
			</field>
		</record>

		<!-- Choose Department View form -->
		<record model="ir.ui.view" id="view_choose_department_view_1">
			<field name="name">choose.department</field>
			<field name="model">choose.department</field>
			<field name="arch" type="xml">
				<form string="Department">
					<group colspan="2">
						<field name="department_ids" options="{'no_create': True}" required="1"/>
						<field name="employee_id" options="{'no_create': True}" required="1"/>
					</group>
					<footer>
						<button name="action_bids_field" class="btn-primary" string="Confirm" type="object"/>
						<button string="Cancel" class="oe_link" special="cancel" />
					</footer>
				</form>
			</field>
		</record>

		<!-- Tender type view form -->
		<record id="view_tender_type_form" model="ir.ui.view">
			<field name="name">tender.type.form</field>
			<field name="model">tender.type</field>
			<field name="arch" type="xml">
				<form string="Tender">
					<group>
						<field name="name" required="1"/>
						<field name="parent_id"/>
					</group>
					<notebook>
						<page string="Childs">
							<field name="child_ids" readonly="1"/>
						</page>
						<page string="Rates">
							<field name="rate_max_ids">
								<tree editable="bottom">
									<field name="rate_id"/>
									<field name="max_value" sum="Total"/>
								</tree>
							</field>
						</page>
					</notebook>

					<div class="oe_chatter">
						<field name="message_follower_ids" widget="mail_followers"/>
						<field name="message_ids" widget="mail_thread"/>
					</div>
				</form>
			</field>
		</record>

		<!-- Tender view-->
		<!-- Tender calendar view -->
		<record id="view_tender_calendar" model="ir.ui.view">
			<field name="name">tender.tender.calendar</field>
			<field name="model">tender.tender</field>
			<field name="arch" type="xml">
				<calendar string="Tender" color="state" date_start="ordering_date">
					<field name="department_id"/>
					<field name="name" widget="monetary"/>
					<field name="schedule_date" widget="monetary"/>
				</calendar>
			</field>
		</record>

		<!-- Tender pivot view -->
		<record id="view_tender_pivot" model="ir.ui.view">
			<field name="name">tender.tender.pivot</field>
			<field name="model">tender.tender</field>
			<field name="arch" type="xml">
				<pivot string="Purchase Tender">
					<field name="schedule_date" type="row"/>
					<field name="name" widget="measure"/>
				</pivot>
			</field>
		</record>

		<!-- Tender kanban View  -->
		<record id="view_tender_kanban" model="ir.ui.view">
			<field name="name">tender.tender.kanban</field>
			<field name="model">tender.tender</field>
			<field name="arch" type="xml">
				<kanban default_group_by="state" class="o_kanban_small_column">
					<field name="color"/>
					<field name="name"/>
					<field name="user_id"/>
					<field name="company_id"/>
					<field name="date_end"/>
					<field name="type_id"/>
					<field name ="ordering_date" />
					<field name ="schedule_date" />
					<field name ="department_id" />
					<templates>
						<t t-name="kanban-box">
							<div t-attf-class="oe_kanban_color_#{kanban_getcolor(record.color.raw_value)} oe_kanban_card oe_kanban_global_click">
								<div class="o_dropdown_kanban dropdown" groups="base.group_user">
									<a class="dropdown-toggle btn" data-toggle="dropdown" href="#">
										<span class="fa fa-bars fa-lg"/>
									</a>
									<ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
										<t t-if="widget.editable">
											<li>
												<a type="set_cover">Set Cover Image</a>
											</li>
										</t>
										<t t-if="widget.editable">
											<li>
												<a type="edit">Edit Call</a>
											</li>
										</t>
										<t t-if="widget.deletable">
											<li>
												<a type="delete">Delete</a>
											</li>
										</t>
										<li>
											<ul class="oe_kanban_colorpicker" data-field="color"/>
										</li>
									</ul>
								</div>
								<div class="oe_kanban_content">
									<div>
										<field name="name"/>
									</div>
									<div>
										<strong>
											<field name="desc_name"/>
										</strong>
									</div>
									<div>
										<labal for="type_id" />
										<field name="type_id"/>
									</div>
									<div>
										<field name="count_rated"/>
									</div>
									<div class="text-muted">
										<field name="is_publish" invisible="context.get('is_publish', False)"/>
										<t t-if="is_publish" t-set="green">oe_kanban_text_red</t>
										<span t-attf-class="#{red || ''}">
											<i>
												<field name="is_publish"/>
											</i>
										</span>
									</div>
									<div class="text-muted">
										<field name="department_id" invisible="context.get('default_department_id', False)"/>
										<t t-if="record.schedule_date.raw_value and record.schedule_date.raw_value lt (new Date())" t-set="red">oe_kanban_text_red</t>
										<span t-attf-class="#{red || ''}">
											<i>
												<field name="schedule_date"/>
											</i>
										</span>
									</div>
									<div class="text-muted">
										<field name="company_id" invisible="context.get('default_performer_team_id', False)"/>
										<t t-if="record.date_end.raw_value and record.date_end.raw_value lt (new Date())" t-set="red">oe_kanban_text_red</t>
										<span t-attf-class="#{red || ''}">
											<i>
												<field name="date_end"/>
											</i>
										</span>
									</div>

									<div class="oe_kanban_bottom_right">
										<img t-att-src="kanban_image('res.users', 'image_small', record.user_id.raw_value)" t-att-title="record.user_id.value" width="24" height="24" class="oe_kanban_avatar pull-right"/>
										<div class="pull-left" groups="base.group_user">
											<field name="state" widget="state_selection"/>
										</div>
									</div>
								</div>
								<div class="oe_clear"></div>
							</div>
						</t>
					</templates>
				</kanban>
			</field>
		</record>

		<!-- Tender form view-->
		<record id="view_tender_form" model="ir.ui.view">
			<field name="name">tender.tender.form</field>
			<field name="model">tender.tender</field>
			<field name="priority">1</field>
			<field name="arch" type="xml">
				<form string="Tender Register">
					<header>
						<!--  Ноорог-->
						<button name="action_allowed" attrs="{'invisible':['|',('is_in_wanted_group','=',False),('state','not in',['draft','allowed'])]}" string="Allow" class="btn-primary" type="object" groups="nomin_tender.group_tender_wanter_manager"/>
						<button name="action_reject" attrs="{'invisible':['|',('is_in_wanted_group','=',False),('state','not in',['draft','allowed'])]}" string="Reject" type="object" groups="nomin_tender.group_tender_wanter_manager"/>
						<!-- <button name="action_contract" states="draft" string="Create contract" class="btn-primary" type="object" groups="nomin_base.group_holding_ceo"/> -->
						<!-- Татгалзсан -->
						<button name="action_draft_purchase" states="reject" string="Худалдан авалт" class="btn-primary" type="object" groups="nomin_base.group_holding_ceo"/>

						<button name="action_contract_request" attrs="{'invisible':['|',('is_in_wanted_group','=',False),('state','not in',['draft','allowed'])]}" string="Гэрээ үүсгэх хүсэлт" class="btn-primary" type="object" groups="nomin_tender.group_tender_wanter_manager"/>
						<button name="action_allow_contract" states="contract_request" string="Зөвшөөрөх" class="btn-primary" type="object" groups="nomin_base.group_holding_ceo"/>
						<button name="action_draft" states="contract_request" string="Буцаах" class="btn-primary" type="object" groups="nomin_base.group_holding_ceo"/>
						<button name="action_to_tender" states="reject" string="To Tender" type="object" groups="nomin_base.group_holding_ceo"/>
						<button name="action_purchase_order" states="closed" string="Purchase Order" type="object" groups="nomin_base.group_holding_ceo"/>
						<!-- Зөвшөөрсөн -->
						<!-- <button name="action_bids_field" class="btn-primary" states="allowed" string="Confirm" type="object" groups=""/>
                    <button name="action_draft" class="btn-primary" states="allowed" string="Decline" type="object" groups=""/> -->
						<!-- Тендер зарлах салбарт илгээсэн//Батлах/Буцаах товч байрлана -->
						<button name="action_open" attrs="{'invisible':['|',('is_in_branch_group','=',False),('state','!=','bids')]}" class="btn-primary" string="Start confirm process" type="object" groups="nomin_tender.group_tender_branch_manager"/>
						<button name="action_draft" attrs="{'invisible':['|',('is_in_branch_group','=',False),('state','!=','bids')]}" string="Decline" type="object" groups="nomin_tender.group_tender_branch_manager"/>

						<button name="action_to_draft" class="btn-primary" attrs="{'invisible':[('state','!=','delay')]}" string="Хойшлуулсан тендер ноорог болгох" type="object" groups="nomin_tender.group_tender_manager"/>

						<button name="action_to_delay" class="btn-primary" attrs="{'invisible':[('state','=','delay')]}" string="Тендер Хойшлуулах" type="object" groups="nomin_tender.group_tender_manager"/>




						<!-- Нээлттэй -->
						<button name="action_confirmed" attrs="{'invisible':['|',('is_in_confirmed_group','=',False),('state','!=','open')]}" class="btn-primary" string="Verify" type="object"/>
						<button name="action_cancel" attrs="{'invisible':['|',('is_in_confirmed_group','=',False),('state','!=','open')]}" string="Cancel" type="object"/>
						<button name="action_to_bids" attrs="{'invisible':['|',('is_in_branch_group','=',False),('state','!=','open')]}" string="Back" type="object" groups="nomin_tender.group_tender_branch_manager"/>
						<!-- Баталсан-->
						<!-- <button name="action_to_confirm" class="btn-primary" states="confirmed_completed" string="Send to committee" type="object" groups="nomin_tender.group_tender_branch_manager"/> -->
						<button name="send_to_manager" class="oe_highlight" string="Send Requist" type="object" states="confirmed" groups="nomin_tender.group_tender_secretary"/>
						<button name="action_back" string="To Back" type="object" states="confirmed" groups="nomin_tender.group_tender_secretary"/>
						<button name="action_to_publish" class="oe_highlight" string="Tender publish" type="object" states="send_to_manager" groups="nomin_tender.group_tender_manager"/>
						<button name="action_to_secretary" string="Tender back" type="object" states="send_to_manager" groups="nomin_tender.group_tender_manager"/>
						<!-- <button name="action_done" class="btn-primary" states="published" string="Open BID" type="object" groups="nomin_tender.group_tender_manager"/> -->
						<!-- <button name="action_to_approved_date" class="btn-primary" states="bid_expire" string="Approve Date" type="object"/> -->
						<button name="action_to_extend" class="btn-primary" attrs="{'invisible':['|',('is_extend','=', True),('state','not in' ,['bid_expire'])] }" string="Extend BID" type="object" groups="nomin_tender.group_tender_secretary"/>
						<!-- <button name="action_to_protocol" class="btn-primary" attrs="{'invisible':[('state','not in',['in_selection'])]}" string="Protocol" type="object" groups="nomin_tender.group_tender_secretary"/> -->
						<button name="action_closed" class="btn-primary" states="bid_expire" string="Close BID" type="object" groups="nomin_tender.group_tender_manager"/>
						<button name="create_valuation" class="btn-primary" attrs="{'invisible': ['|','|',('is_meet_start_date','=',False),('is_valuation_created','=',True),('state','not in' ,['closed'])]}" string="Үнийн санал нээх" type="object" groups="nomin_tender.group_tender_manager"/>
						<button name="create_contract" string="Contract create" type="object" class="oe_highlight" attrs="{'invisible':['|',('contract_id','!=',False),('state','not in',['finished','contract_created'])]}" groups="nomin_tender.group_tender_branch_manager,nomin_base.group_department_chief"/>
						<button name="action_cancelled" string="Хүчингүй болгох" type="object" class="oe_highlight" attrs="{'invisible':[('state','not in',['closed','in_selection'])]}" groups="nomin_tender.group_tender_manager"/>

						<button name="action_disabled" attrs="{'invisible':['|',('is_tender_disabled_user','=',False),('state','not in',['draft'])]}" string="Action Disabled" type="object"/>

						<field name="state" widget="statusbar" statusbar_visible="draft,bids,open,confirmed,send_to_manager,published,bid_expire,closed,in_selection,finished"/>

					</header>
					<sheet>
						<div class="oe_title">
							<h1>
								<field name="name" readonly="1"/>
							</h1>
						</div>
						<div class="oe_button_box" name="button_box">

							<button class="oe_stat_button" name="website_publish_button" type="object" icon="fa-globe" attrs="{'invisible': [('state', 'not in', ['confirmed','send_to_manager','published','bid_expire','closed','in_selection','finished'])]}">
								<field name="is_publish" widget="website_button"/>
							</button>
							<!-- <button class="oe_stat_button" name="view_tender_calendar" type="object" icon="fa-calendar" attrs="{'invisible': [('state', 'in', ['in_selection','finished'])]}">
								<field name="close_remaining" widget="statinfo"/>
							</button> -->
							<button name="%(tender_participants_action)d" class="oe_stat_button" icon="fa-book" type="action" groups="nomin_tender.group_tender_committee_members">
								<field name="partner_count" widget="statinfo" string="Participants"/>
							</button>
							<!-- <button class="oe_stat_button" name="" type="action" icon="fa-globe">
		                    <field name="count_rated" widget="statinfo"/>
		            	</button> -->
							<button name="%(nomin_tender.contract_action)d" class="oe_stat_button" icon="fa-files-o" string="Contract" type="action" widget="statinfo" groups="nomin_tender.group_tender_manager,nomin_tender.group_tender_secretary,nomin_tender.group_tender_branch_manager,nomin_base.group_department_chief" attrs="{'invisible':[('contract_id','=',False)]}"/>

						</div>

						<group>
							<group>
								<field name="is_tender_disabled_user" invisible="1"/>
								<field name="is_in_wanted_group" invisible="1"/>
								<field name="is_in_branch_group" invisible="1"/>
								<field name="is_in_confirmed_group" invisible="1"/>
								<field name="is_valuation_created" invisible="1"/>
								<field name="is_valuation_finished" invisible="1"/>
								<field name="is_meet_start_date" invisible="1"/>
								<field name="is_sent_result" invisible="1"/>
								<!-- <field name="company_id" options="{'no_create': True}" attrs="{'readonly': [('state', 'not in', ['draft'])],'required': [('state', 'not in', ['draft','allowed','bids_field','open'])]}"/>
							<field name="sector_id" options="{'no_create': True}" attrs="{'readonly': [('state', 'not in', ['draft'])]}"/>
							<field name="department_id" options="{'no_create': True}" attrs="{'readonly': [('state', 'not in', ['draft'])]}"/>
                    		<field name="user_id" options="{'no_create': True}" attrs="{'readonly': [('state', 'not in', ['draft'])]}"/> -->
								<field name="company_id" options="{'no_create': True}" readonly="1"/>
								<field name="sector_id" options="{'no_create': True}" readonly="1"/>
								<field name="department_id" options="{'no_create': True}" readonly="1"/>
								<field name="user_id" options="{'no_create': True}" readonly="1"/>
								<field name="requisition_id" attrs="{'invisible': [('requisition_id', '=', False)],'readonly': [('requisition_id', '!=', False)]}" options="{'no_create': True}"/>
								<!-- <field name="employee_id" options="{'no_create': True}" attrs="{'readonly':[('state','not in',['draft'])]}"/> -->
								<field name="ordering_date" attrs="{'readonly': [('state', 'not in', ['draft','allowed'])],'required': [('state', 'in', ['draft','allowed'])]}"/>
								<field name="type_id" options="{'no_create': True}" attrs="{'required': [('state', 'in', ['draft','bids'])],'readonly': [('state', 'not in', ['draft','allowed','bids'])]}" domain="[('parent_id','=',False)]"/>
								<field name="child_type_id" string="Дэд ангилал" options="{'no_create': True}" attrs="{'required': [('state', 'in', ['draft','bids'])],'readonly': [('state', 'not in', ['draft','allowed','bids'])]}" domain="[('parent_id','!=',False)]"/>
								<field name="desc_name" attrs="{'required': [('state', 'in', ['draft','bids'])],'readonly': [('state', 'not in', ['draft','allowed','bids','confirmed'])]}"/>
								<!-- <field name="purchase_order_id" attrs="{'invisible':[('state','!=','open_purchase')],'readonly':[('state','!=','draft')]}" /> -->
								<field name="respondent_department_id" attrs="{'invisible': [('state', 'in', ['draft','reject','open_purchase','allowed'])],'readonly': [('state', 'not in', ['draft'])]}" options="{'no_create': True}"/>
								<field name="respondent_employee_id" attrs="{'invisible': [('state', 'in', ['draft','reject','open_purchase','allowed'])],'readonly': [('state', 'not in', ['draft'])]}"/>
								<field name="is_warranty" attrs="{'readonly': [('state', 'not in', ['draft','allowed','bids'])]}"/>
								<field name="warranty" attrs="{'invisible': [('is_warranty','=',False)],'required': [('is_warranty','=',True)],'readonly': [('state', 'not in', ['draft','allowed','bids'])]}"/>
								<field name="invitation_id" readonly="1"/>
							</group>
							<group>
								<field name="date_open_deadline" attrs="{'required': [('state', 'not in', ['draft','allowed','reject','contract_request','open_purchase','delay'])], 'readonly':[('state','not in',['draft','allowed','bids','confirmed','send_to_manager'])]}"/>
								<field name="date_end" attrs="{'required': [('state', 'not in', ['draft','allowed','reject','open_purchase','contract_request','delay'])],'readonly':[('state','not in',['draft','allowed','bids','confirmed','send_to_manager'])]}"/>
								<field name="published_date" readonly="1"/>
								<field name="closed_date" readonly="1"/>
								<field name="is_open_tender" attrs="{'readonly':[('state','not in',['draft','allowed','bids'])]}"/>
								<field name="is_alternative" attrs="{'readonly':[('state','not in',['draft','allowed','bids'])]}"/>
								<field name="is_domestic" attrs="{'readonly':[('state','not in',['draft','allowed','bids'])]}"/>
								<field name="is_performance" attrs="{'readonly':[('state','not in',['draft','allowed','bids'])]}"/>
								<field name="performance_amount" attrs="{'required':[('is_performance','=',True)],'invisible':[('is_performance','=',False)], 'readonly':[('state','not in',['draft','allowed','bids'])]}"/>
								<field name="technical_requirement" attrs="{'readonly':[('state','not in',['draft','allowed','bids'])]}"/>
								<field name="work_experience_info" attrs="{'readonly':[('state','not in',['draft','allowed','bids'])]}"/>
								<field name="license" attrs="{'readonly':[('state','not in',['draft','allowed','bids'])]}"/>
								<field name="is_extend" invisible="1"/>
								<field name="is_old" invisible="0"/>
								<field name="contract_id" attrs="{'invisible':[('contract_id','=',False)],'readonly':[('contract_id','!=',False)]}"/>
							</group>
						</group>
						<group >
							<!-- <field name="procurement_id"/>
                    	<field name="task"/> -->
							<field name="description" attrs="{'readonly':[('state','not in',['draft','allowed','bids'])]}"/>
							<field name="special_require" attrs="{'readonly':[('state','not in',['draft','allowed','bids'])]}"/>
						</group>

						<notebook colspan="4">
							<page string="Required Producst">
								<separator string="Product List" colspan="2" attrs="{'invisible': [('is_old','!=',True)]}"/>
								<separator string="Материалын зардал" colspan="2" attrs="{'invisible': [('is_old','=',True)]}"/>
								<group>
									<field name="tender_line_ids" attrs="{'readonly': ['|',('state','not in',['draft','reject','open_purchase']),('requisition_id','!=',False)]}" colspan="2" nolabel="1">
										<tree string="Products" editable="bottom">
											<field name="product_id" required="1" options="{'no_create': True}"/>
											<field name="product_name"/>
											<field name="product_qty" required="1"/>
											<field name="product_uom_id" required="1" options="{'no_create': True}"/>
											<field name="schedule_date"/>
										</tree>
										<form string="Products">
											<group>
												<field name="product_id" />
												<field name="product_name"/>
												<field name="product_qty"/>
												<field name="product_uom_id" />
												<field name="schedule_date"/>
												<field name="account_analytic_id" groups="purchase.group_analytic_accounting"/>
											</group>
										</form>
									</field>
								</group>
								<separator string="Ажилах хүчний зардал" colspan="2" attrs="{'invisible': [('is_old','=',True)]}"/>
								<group>
									<field name="tender_labor_ids" attrs="{'readonly': ['|',('state','not in',['draft','reject','open_purchase']),('requisition_id','!=',False)],'invisible':[('is_old','=',True)]}" colspan="2" nolabel="1">
										<tree string="Products" editable="bottom">
											<field name="product_name" required="1"/>
											<field name="product_qty" required="1"/>
											<field name="product_uom_id" required="1"/>
											<field name="schedule_date"/>
										</tree>
										<form string="Products">
											<group>
												<field name="product_name" />
												<field name="product_qty"/>
												<field name="product_uom_id" />
												<field name="schedule_date"/>
												<field name="account_analytic_id" groups="purchase.group_analytic_accounting"/>
											</group>
										</form>
									</field>
								</group>
							</page>
							<page string="Approval employee list" attrs="{'invisible': [('state','in',['draft','reject','open_purchase','allowed'])]}">
								<separator string="employee list" colspan="2"/>
								<group>
									<field name="confirmed_member_ids" context="{'type_id':type_id}" colspan="2" nolabel="1" attrs="{'readonly': [('state','not in',['bids'])]}">
										<tree string="Employee of tender" editable="bottom">
											<field name="tender_id" invisible="1" />
											<field name="type_id" invisible="1"/>
											<field name="employee_id" required="1" options="{'no_create': True}"/>
											<field name="confirmed_date" readonly="1"/>
											<field name="state" readonly="1"/>
											<!-- <button name="approved_tender_requist" groups="" attrs="{'invisible': [('state', 'in', ['done','cancel'])]}" string="Approved tender" type="object" context="{'emp_id':context.get('id4')}"/>
										<button name="cancel_tender_requist" groups="" attrs="{'invisible': [('state','in',['done','cancel'])]}" string="Cancel tender" type="object" context="{'emp_id':context.get('id4')}"/> -->
										</tree>
										<form string="Employee of tender">
											<group colspan="2" col="2">
												<field name="tender_id" invisible="1"/>
												<field name="employee_id"/>
												<field name="confirmed_date" />
												<field name="state"/>
											</group>
										</form>
									</field>
								</group>
							</page>
							<page string="Vendors of Tender" attrs="{'invisible': [('state','in',['draft','bids','open','confirmed','reject'])]}">
								<separator string="Bidded Vendors" colspan="2"/>
								<button name="sent_tender_results" colspan="1" icon="terp-mail-message-new" type="object" class="btn-primary" string="Үр дүнг мэйлээр илгээх" attrs="{'invisible': ['|','|',('state','!=','finished'), ('is_valuation_finished','=',False), ('is_sent_result','=',True)]}" groups="nomin_tender.group_tender_secretary"/>
								<group>
									<field name="participants_ids" widget="many2many_list" string="Vendors Of Tender" colspan="2" nolabel="1" attrs="{'readonly': [('state','not in',['open_purchase','published','bid_expire'])]}">
										<tree string="Vendor of Tender" editable="bottom">
											<field name="tender_id" invisible="1"/>
											<field name="partner_id"/>
											<field name="document_id"/>
											<!-- <field name="execute_time" colspan="2" attrs="{'invisible': [('state','not in',['open_cost','close'])]}"/>
										<field name="warranty_time" colspan="2" attrs="{'invisible': [('state','not in',['open_cost','close'])]}"/>
										<field name="amount_total" attrs="{'invisible': [('state','not in',['open_cost','close'])]}"/> -->
											<field name="datetime"/>
											<field name="state" readonly="1"/>
										</tree>
										<form string="partners">
											<group colspan="4" col="4">
												<field name="tender_id" colspan="2"/>
												<field name="name" colspan="2"/>
												<field name="partner_id" colspan="2"/>
												<field name="datetime" colspan="2"/>
												<field name="execute_time" colspan="2" attrs="{'invisible': [('state','not in',['open_cost','close'])]}"/>
												<field name="warranty_time" colspan="2" attrs="{'invisible': [('state','not in',['open_cost','close'])]}"/>
												<!-- <field name="amount_total" attrs="{'invisible': [('state','not in',['open_cost','close'])]}"/> -->
												<field name="state" colspan="2" invisible="1"/>
											</group>
											<notebook>
												<page string="Document Valuation" attrs="{'invisible': [('state','in',['draft'])]}">
													<group>
														<field name="document_id" colspan="2"/>
													</group>
												</page>
												<page string="Technical Valuation" attrs="{'invisible': [('state','not in',['open_document','open_cost'])]}">
													<group>
														<field name="t_partner_technical_id" colspan="2"/>
														<field name="t_partner_proxy_id" colspan="2"/>
														<field name="t_partner_require_id" colspan="2"/>
														<field name="t_partner_worklist_id" colspan="2"/>
														<field name="t_partner_license_id" colspan="2"/>
														<field name="t_partner_alternative_id" colspan="2"/>
													</group>
												</page>
												<page string="Cost Valuation" attrs="{'invisible': [('state','not in',['open_cost','close'])]}">
													<group>
														<field name="t_partner_cost_id" colspan="2" attrs="{'invisible': [('state','not in',['open_cost','close'])]}"/>
														<field name="t_partner_schedule_id" colspan="2" attrs="{'invisible': [('state','not in',['open_cost','close'])]}"/>
													</group>
												</page>
												<page string="Work tasks" attrs="{'invisible':[('state','!=','open_cost')]}">
													<separator string="Work tasks"/>
													<field name="task_ids" nolable="1" colspan="4" attrs="{'readonly':[('state','!=','draft')]}">
														<tree string="Work tasks" nolabel="1" editable="bottom">
															<field name="name" required="1"/>
															<field name="qty" required="1"/>
															<field name="unit_price" required="1"/>
															<field name="amount" readonly="1"/>
															<field name="costs_of_materials"/>
															<field name="other_costs"/>
															<field name="line_total_amount"/>
															<field name="tender_id" invisible="1"/>
															<field name="partner_id" invisible="1"/>
															<field name="task_id" invisible="1"/>
														</tree>
													</field>
													<group class="oe_subtotal_footer oe_right">
														<field name="amount_total" class="oe_subtotal_footer_separator"/>
													</group>
												</page>
											</notebook>
										</form>
									</field>
								</group>
								<separator string="Rate of Partners" colspan="2"/>
								<field name="rate_partner_ids" colspan="2" nolabel="1">
									<!-- <tree string="partners" editable="false"> -->
									<!-- <tree string="Participants Value" create="false" delete="false" colors="gray:total_value == 0"> -->
									<tree string="Participants Value" create="false" delete="false" fonts="bold:is_win==True" colors="red:total_value == 0;blue:(is_win == False) and state in ('draft','open');green:(is_win == False) and state in ('completed','approved');orange:(is_win == True) and (state == 'approved')" default_order="total_value desc">
										<field name="tender_id" invisible="1"/>
										<field name="partner_id"/>
										<field name="tender_valuation_id"/>
										<field name="employee_partner_ids" invisible="1"/>
										<field name="total_value"/>
										<field name="state" invisible="1"/>
										<field name="is_win" invisible="1"/>
										<field name="is_choose" invisible="1"/>
										<!--  -->
										<field name="is_sent" invisible="1"/>
										<field name="reason" required="1" attrs="{'readonly':[('is_sent','=',True)]}"/>
										<button icon="terp-rating-rated" attrs="{'invisible':['|',('is_win','!=',True),('state','!=','approved')]}"/>
										<button name="confirm_partner" colspan="1" type="object" string="Partner Confirm" attrs="{'invisible': ['|',('state','!=','approved'), ('is_choose','=',True)]}" groups="nomin_tender.group_tender_manager"/>
									</tree>
									<form string="partners">
										<group colspan="4" col="4">
											<field name="tender_id" readonly="1"/>
											<field name="tender_valuation_id" readonly="1"/>
											<field name="partner_id" readonly="1"/>
											<field name="total_value" readonly="1"/>
											<field name="state" invisible="1"/>
											<field name="is_choose" invisible="1"/>
											<field name="is_sent" invisible="1"/>
											<field name="reason" required="1" attrs="{'readonly':[('is_sent','=',True)]}"/>
										</group>
									</form>
								</field>
							</page>
							<page string="Members of Tender">
								<separator string="Commission Of Tender" colspan="2"/>
								<field name="committee_member_ids" context="{'type_id':type_id}" colspan="2" nolabel="1" attrs="{'readonly': [('state','not in',['confirmed','closed'])]}">
									<tree string="Committee members" editable="bottom">
										<field name="tender_id" invisible="1"/>
										<field name="type_id" invisible="1"/>
										<field name="employee_id" required="1"/>
										<field name="job_id" readonly="1"/>
										<field name="is_valuation"/>
										<field name="state" readonly="1"/>
									</tree>
									<form string="Committee members">
										<group col="4">
											<field name="tender_id" colspan="2"/>
											<field name="employee_id" colspan="2"/>
											<field name="job_id" colspan="2"/>
											<field name="is_valuation" colspan="2"/>
											<field name="state" colspan="2"/>
										</group>
									</form>
								</field>
							</page>
							<page string="Tender Extended">
								<separator string="Tender date extend" colspan="2"/>
								<field name="extend_requist_ids" readonly="1" context="{'id2':id}">
									<tree string="Date Extend" editable="bottom">
										<field name="tender_id" invisible="1"/>
										<field name="name"/>
										<field name="extend_date_start"/>
										<field name="extend_date_end"/>
										<field name="extend_content"/>
										<field name="state"/>
										<button name="action_to_approved_date" groups="nomin_tender.group_tender_manager" attrs="{'invisible': [('state', '=', 'done')]}" string="Approved extended" type="object" icon="gtk-apply" context="{'reg_id':context.get('id2')}"/>
										<!-- <button name="cancel_exended" groups="" attrs="{'invisible': [('state','=','cancel')]}" string="Cancel extended" type="object" icon="gtk-cancel" context="{'reg_id':context.get('id2')}"/> -->
									</tree>
									<form string="Tender date extend form">
										<group colspan="4" col="4">
											<field name="tender_id" colspan="2" readonly="1"/>
											<field name="name" colspan="2"/>
											<field class="oe_inline" name="extend_date_start" required = "1" colspan="2"/>
											<field class="oe_inline" name="extend_date_end" required = "1" colspan="2"/>
											<field name="extend_content" colspan="2" />
											<field name="state" colspan="2" />
										</group>
									</form>
								</field>
							</page>
							<page string = "Meeting date of tender" attrs="{'invisible': [('state', 'not in', ['closed','in_selection'])]}">
								<separator string="Schedule Meeting" colspan="2" nolable="1"/>
								<field name="meeting_ids" colspan="2" context="{'id3':id}" nolabel="1" attrs="{'readonly': [('state','not in',['closed','in_selection'])]}">
									<tree string="Schedule meeting" create="false" delete="false">
										<field name="tender_id" colspan="2" invisible="1"/>
										<field name="name" colspan="2"/>
										<field name="meeting_from_date" colspan="2"/>
										<field name="meeting_to_date" colspan="2"/>
										<field name="comment" colspan="2"/>
										<field name="state" colspan="2"/>
										<!-- <button name="approved_meeting" groups="" attrs="{'invisible': [('state', 'in', ['done','cancel'])]}" string="Approved meeting" type="object" icon="gtk-apply" context="{'meet_id':context.get('id3')}"/>
									<button name="cancel_meeting" groups="" attrs="{'invisible': [('state','=','cancel')]}" string="Cancel meeting" type="object" icon="gtk-cancel" context="{'meet_id':context.get('id3')}"/> -->
									</tree>
									<form string="Schedule meeting">
										<group colspan="4" col="4">
											<field name="tender_id" invisible="1" colspan="2"/>
											<field name="user_id" colspan="2"/>
											<field name="name" invisible="1" colspan="2"/>
											<field name="state" readonly="1" colspan="2"/>
											<field name="meeting_from_date" colspan="2"/>
											<field name="meeting_to_date" colspan="2"/>
											<field name="comment" colspan="4"/>
										</group>
									</form>
								</field>
							</page>
							<page string = "Meeting protocol">
								<separator string="Comments" colspan="2" nolable="1"/>
								<field name="protocol_ids" colspan="2" nolabel="1" readonly="1">
									<tree string="Meeting Protocol" create="false" delete="false">
										<field name="tender_id" invisible="1"/>
										<field name="meeting_id"/>
										<field name="user_id" readonly="1"/>
										<field name="state" colspan="2"/>
									</tree>
									<form>
										<group col="4">
											<field name="tender_id" colspan="2" readonly="1" options="{'no_create': True}"/>
											<field name="meeting_id" colspan="2" readonly="1" options="{'no_create': True}"/>
											<field name="member_ids" colspan="2" readonly="1" options="{'no_create': True}" widget="many2many_tags"/>
											<field name="user_id" readonly="1" colspan="2"/>
											<field name="meet_protocol" colspan="5" readonly="1" />
										</group>
									</form>
								</field>
							</page>
							<page string = "Invitation received partner">
								<separator string="Requirement partner" colspan="2" nolable="1"/>
								<field name="requirement_partner_ids" widget="many2many_tags" options="{'no_create': True}" colspan="2" nolabel="1" attrs="{'readonly': [('state','not in',['draft','reject','bids','confirmed','send_to_manager','published','bid_expire'])]}">
									<tree string="Invitation received partner">
										<field name="name"/>
										<field name="phone"/>
										<field name="email"/>
									</tree>
									<form string="Invitation received partner">
										<group>
											<field name="name" />
											<field name="phone"/>
											<field name="email"/>
										</group>
									</form>
								</field>
								<field name="mail_sent_partner_ids" editable="bottom" invisible="1">
									<tree string="mail">
										<field name="partner_id"/>
										<field name="tender_id"/>
										<field name="is_mail_sent"/>

									</tree>
									<form string='mail'>
										<field name="partner_id"/>
										<field name="tender_id"/>
										<field name="is_mail_sent"/>

									</form>
								</field>
								<separator string="Subscribe Users Tender" colspan="2" nolable="1"/>
								<field name="sub_user_ids" colspan="2" nolabel="1" attrs="{'readonly': [('state','not in',['confirmed','send_to_manager','published','bid_expire'])]}">
									<tree string="Invitation received sub users">
										<field name="email"/>
										<field name="tender_type_ids"/>
									</tree>
									<form string="Invitation received sub users">
										<group>
											<field name="email"/>
											<field name="tender_type_ids"/>
										</group>
									</form>
								</field>
							</page>
						</notebook>
						<group>
							<separator string="Хавсралтууд" colspan="2" nolable="1"/>
							<field name="work_task_ids" nolabel="1">
								<tree string="Хавсралтууд">
									<field name="tender_id" invisible="1"/>
									<field name="tender_work_document_id"/>
								</tree>
								<form>
									<field name="tender_id" invisible="1"/>
									<field name="tender_work_document_id"/>
								</form>
							</field>
						</group>
					</sheet>

					<div class="oe_chatter">
						<field name="message_follower_ids" widget="mail_followers"/>
						<field name="message_ids" widget="mail_thread"/>
					</div>
				</form>
			</field>
		</record>

		<!-- Tender Action view-->

		<record model="ir.actions.act_window" id="tender_type_action">
			<field name="name">Tender Type</field>
			<field name="res_model">tender.type</field>
			<field name="view_mode">tree,form</field>
		</record>

		<record model="ir.actions.act_window" id="action_tender_list">
			<field name="name">Tender List</field>
			<field name="res_model">tender.tender</field>
			<field name="context">{'search_default_group_tender': 1}</field>
			<field name="view_mode">tree,form,kanban,calendar,pivot</field>
			<field name="domain">[('state','not in',('draft','disabled','contract_request','reject','open_purchase','allowed','bids','open'))]</field>
			<field name="search_view_id" ref="view_tender_group"/>
		</record>

		<record model="ir.actions.act_window" id="action_tender_request_list">
			<field name="name">Tender Requests</field>
			<field name="res_model">tender.tender</field>
			<field name="context">{'search_default_group_tender_request': 1}</field>
			<field name="view_mode">tree,form</field>
			<field name="domain">[('state','in',('draft','disabled','contract_request','reject','open_purchase','allowed','bids','open'))]</field>
			<field name="search_view_id" ref="view_tender_request_filter"/>
		</record>

		<record model="ir.actions.act_window" id="tender_invitation_action">
			<field name="name">Tender Invitation List</field>
			<field name="res_model">tender.invitation.guide</field>
			<!-- <field name="context">{'search_default_group_tender': 1}</field> -->
			<field name="view_mode">tree,form</field>
			<!-- <field name="search_view_id" ref="view_tender_filter"/> -->
		</record>

		<!-- Tender Menu view-->
		<menuitem name="Tender" id="root_tender_menu" sequence="25" groups="group_tender_admin,group_tender_manager,group_tender_committee_members,group_tender_requist_approval_leaders,group_tender_branch_manager,group_tender_user"/>
		<menuitem name="Tender List" id="tender_menu" parent="root_tender_menu" sequence="1" groups="group_tender_admin,group_tender_manager,group_tender_secretary,group_tender_committee_members,group_tender_requist_approval_leaders,group_tender_branch_manager,group_tender_user" />
		<menuitem name="Tender Units" id="tender_units_menu" parent="root_tender_menu" sequence="2"/>
		<menuitem name="Tender Documents" id="tender_documents_menu" parent="root_tender_menu" sequence="3"/>
		<menuitem name="Tender Valuation" id="tender_valuation_menu" parent="root_tender_menu" sequence="4" groups="group_tender_committee_members,group_tender_secretary,group_tender_manager,group_tender_admin"/>
		<menuitem name="Tender Settings" id="tender_setting_menu" parent="root_tender_menu" sequence="6" groups="group_tender_secretary,group_tender_admin"/>
		<!-- <menuitem name="Tender History" id="tender_history_portal_menu" parent="root_tender_menu" sequence="7" groups="group_tender_secretary,group_tender_manager,group_tender_admin"/> -->

		<menuitem id="tender_list_menu" name="Tender List" parent="tender_menu" sequence="1" groups="group_tender_admin,group_tender_manager,group_tender_secretary,group_tender_committee_members,group_tender_requist_approval_leaders,group_tender_branch_manager,group_tender_user" action="action_tender_list"/>

		<menuitem id="tender_request_menu" name="Tender Requests" parent="tender_menu" sequence="2" groups="group_tender_admin,group_tender_manager,group_tender_secretary,group_tender_committee_members,group_tender_requist_approval_leaders,group_tender_branch_manager,group_tender_user" action="action_tender_request_list"/>

		<menuitem id="tender_type_menu" name="Tender Category" parent="tender_setting_menu" sequence="1" groups="group_tender_admin,group_tender_secretary" action="tender_type_action"/>

		<menuitem id="tender_invitation_menu" name="Invitation of Tender" parent="tender_units_menu" sequence="3" groups="group_tender_admin,group_tender_manager,group_tender_secretary,group_tender_committee_members,group_tender_requist_approval_leaders,group_tender_branch_manager,group_tender_user" action="tender_invitation_action"/>

		<menuitem id="tender_extend_menu" name="Tender Extended Menu" parent="tender_units_menu" sequence="4" groups="group_tender_admin,group_tender_manager,group_tender_secretary,group_tender_committee_members,group_tender_requist_approval_leaders,group_tender_branch_manager,group_tender_user" action="action_tender_extend_menu"/>

		<!-- <menuitem id="tender_protocol_menu" name="Tender Protocol Menu" parent="tender_units_menu" sequence="6" groups="group_tender_secretary,group_tender_manager" action="action_tender_protocol_menu"/> -->

		<menuitem id="tender_schedule_meeting_menu" name="Meeting of Tender" parent="tender_units_menu" sequence="5" groups="group_tender_admin,group_tender_manager,group_tender_secretary,group_tender_committee_members,group_tender_requist_approval_leaders,group_tender_branch_manager,group_tender_user" action="action_tender_schedule_meeting"/>

		<menuitem id="tender_partner_bids_menu" name="Tender Participants Bid" sequence="5" parent="tender_documents_menu" groups="group_tender_admin,group_tender_manager,group_tender_secretary,group_tender_committee_members,group_tender_requist_approval_leaders,group_tender_branch_manager,group_tender_user" action="tender_partner_bid_action"/>

		<!-- <menuitem id="tender_partner_history_menu" name="History of partner" parent="tender_history_portal_menu" sequence="6" groups="group_tender_secretary,group_tender_manager" action="action_tender_partner_history"/> -->

	</data>
</odoo>